{% extends "base.html" %}

{% block title %}{{ page.title }}{% endblock title %}

{% block metadata %}
	<meta property="theme-color" content="#c1b492" />
	<meta property="og:title" content="{{ page.extra.good_title | default(value=page.title) }}" />
	<!-- TODO: use page.summary support -->
	<meta property="og:description" content="{{ page.content | split(pat="</p>") | first() | striptags() | truncate(length=120) | safe }}" />
	<meta name="description" content="{{ page.content | split(pat="</p>") | first() | striptags() | truncate(length=120) | safe }}" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="{{ page.permalink }}" />
	<meta property="og:article:published_time" content="{{ page.date | date() }}" />
	<meta property="og:article:modified_time" content="{{ page.updated | date() }}" />
	<meta property="og:article:author:username" content="A5rocks" />

	<link href="https://helvetica.moe/api/webmentions" rel="webmention" />
	<link href="https://webmention.io/webmention?forward=https://helvetica.moe/api/webmentions" rel="pingback" />
	<!-- TODO: move this out into main template? -->
	<link href={{ page.permalink }} rel="canonical" />
{% endblock metadata %}

{% block content %}
	<div class="content">
		<h1>{{ page.title }}</h1>
		<p>
			Created <strong>{{ page.date | date(format="%Y-%-m-%-d") }}</strong>
			{% if page.date != page.updated %}
				| Last edited <strong>{{ page.updated | date(format="%Y-%-m-%-d") }}</strong>
			{% endif %}
		</p>
		{{ page.content | safe }}
		<hr>
		<h2>Mentions around the web</h2>
		<p>... TODO ...</p>
	</div>
{% endblock content %}
